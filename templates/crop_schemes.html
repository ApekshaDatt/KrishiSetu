{% extends 'base.html' %}

{% block content %}
    <h1>{{translations.crop_schemes_title}}:{{crop_name}}</h1>
    <div class="accordion" id="cropSchemesAccordion">
        {% for scheme in schemes %}
            <div class="accordion-item">
                <h2 class="accordion-header" id="heading-{{ loop.index }}">
                    <button class="accordion-button" type="button" data-bs-toggle="collapse" 
                            data-bs-target="#collapse-{{ loop.index }}" aria-expanded="true" 
                            aria-controls="collapse-{{ loop.index }}">
                        {{ scheme.name }}
                    </button>
                </h2>
                <div id="collapse-{{ loop.index }}" class="accordion-collapse collapse show" 
                     aria-labelledby="heading-{{ loop.index }}" data-bs-parent="#cropSchemesAccordion">
                    <div class="accordion-body">
                        <p><strong>{{ translations.description_label }}:</strong> {{ scheme.description }}</p>
                        <p><strong>{{ translations.eligibility_label }}:</strong> {{ scheme.eligibility }}</p>
                        <p><strong>{{ translations.category_label | default('Category') }}:</strong> 
                           {{ translations['category_' + scheme.category|replace(' ', '_')|replace('(', '')|replace(')', '')|replace('.', '')|replace(',', '')|lower] or scheme.category }}
                        {% if scheme.document_url %}
                                <a href="{{ url_for('crop_schemes', crop_id=crop_id, lang=lang) }}"></a>
                            {% endif %}
                        </p>
                    </div>
                </div>
            </div>
        {% endfor %}
        {% if not schemes %}
            <p>No schemes available for this crop.</p>
        {% endif %}
    </div>
{% endblock %}